parse_config:
  raw_binding_map:
    # --- WICHTIG: Pr√ºfe ob diese exakt so in deiner .keymap stehen ---
    "&lt 1 TAB": {t: "‚á•", s: "Lower", type: "lower_l"}
    "&lt 1 RET": {t: "‚èé", s: "Lower", type: "lower_r"}
    "&lt 2 ESC": {t: "‚éã", s: "Raise", type: "raise_l"}
    "&lt_hp 2 SPACE": {t: "‚ê£", s: "Raise", type: "raise_r"}
    "&lt_hp 3 BSPC": {t: "‚å´", s: "Adjust", type: "adjust_style"}

    # --- EINGABE & NAVIGATION ---
    "&kp RET": "‚èé"
    "&kp BSPC": "‚å´"
    "&kp DEL": "‚å¶"
    "&kp TAB": "‚á•"
    "&kp ESC": "‚éã"
    "&kp SPACE": "‚ê£"
    "&kp LGUI": "‚äû"
    "&kp GRAVE": {t: "^", s: "¬∞"}
    "&kp PLUS": "`"
    "&kp HOME": "‚§í Pos1"
    "&kp END": "‚§ì Ende"

    # --- ZAHLEN & DEUTSCHE FIXES ---
    "&kp N1": {t: "1", s: "!"}
    "&kp N2": {t: "2", s: "\""}
    "&kp N3": {t: "3", s: "¬ß"}
    "&kp N4": {t: "4", s: "$"}
    "&kp N5": {t: "5", s: "%"}
    "&kp N6": {t: "6", s: "&"}
    "&kp N7": {t: "7", s: "/"}
    "&kp N8": {t: "8", s: "("}
    "&kp N9": {t: "9", s: ")"}
    "&kp N0": {t: "0", s: "="}
    "&kp MINUS": {t: "√ü", s: "?"}
    "&kp SEMI": "√ñ"
    "&kp SQT": "√Ñ"
    "&kp LBKT": "√ú"
    "&kp RA(N7)": "{"
    "&kp RA(N8)": "["
    "&kp RA(N9)": "]"
    "&kp RA(N0)": "}"
    "&kp RA(Q)": "@"
    "&kp RA(E)": "‚Ç¨"
    "&kp RA(MINUS)": "\\"
    "&kp RA(SQT)": "¬¥"
    "&kp RA(NON_US_BSLH)": "|"
    "&kp NON_US_HASH": {t: "#", s: "'"}
    "&kp NON_US_BSLH": {t: "<", s: ">"}
    "&kp SLASH": {t: "-", s: "_"}

    # --- MULTIMEDIA & MAUS ---
    "&kp C_PREV": "‚èÆ"
    "&kp C_NEXT": "‚è≠"
    "&kp C_PP": "‚èØ"
    "&mkp LCLK": "üñ± L"
    "&mkp RCLK": "üñ± R"

    # --- SYSTEM & BT ---
    "&usb_on": {t: "œà USB", s: "‚òÄ ON"}  
    "&bt_off": {t: "·õí BT", s: "‚òæ OFF"}
    "&bt BT_SEL 0": "·õí ‚ûÄ"
    "&bt BT_SEL 1": "·õí ‚ûÅ"
    "&bt BT_SEL 2": "·õí ‚ûÇ"
    "&bt BT_SEL 3": "·õí ‚ûÉ"
    "&bt BT_SEL 4": "·õí ‚ûÑ"
    "&kp LA(F4)": {t: "‚úï", s: "Alt+F4"}
    
    # --- MAKROS & SPEZIAL ---
    "&smiley": "‚òª"
    "&durchmesser": "√ò"
    "&kp RA(M)": "¬µ"
    "&kp RA(N2)": "¬≤"
    "&kp RA(N3)": "¬≥"

    # --- MODIFIER FIXES ---
    "&hrm_safe LCTRL D": {t: "D", s: "CTRL"}
    "&hrm_shift LSHIFT F": {t: "F", s: "SHIFT"}
    "&hrm_shift RSHIFT J": {t: "J", s: "SHIFT"}
    "&hrm_safe RCTRL K": {t: "K", s: "CTRL"}
    "&hrm_safe LALT X": {t: "X", s: "ALT"}
    "&hrm_safe RALT DOT": {t: ".", s: "ALTGR"}

draw_config:
  dark_mode: true
  append_style: |
    /* Die Atom-Bombe gegen das Standard-Grau: Wir selektieren √ºber die Layer-Klasse */
    
    /* LOWER Keys (Rot) */
    .layer-default g.lower_l rect, .layer-default g.lower_r rect,
    .layer-lower g.keypos-32 rect, .layer-lower g.keypos-33 rect { 
        fill: #ef4444 !important; 
        stroke: #7f1d1d !important; 
    }

    /* RAISE Keys (Blau) */
    .layer-default g.raise_l rect, .layer-default g.raise_r rect { 
        fill: #3b82f6 !important; 
        stroke: #1e3a8a !important; 
    }

    /* ADJUST Key (Lila) */
    .layer-default g.adjust_style rect { 
        fill: #a855f7 !important; 
        stroke: #581c87 !important; 
    }

    /* Text-Korrektur: Damit man auf den bunten Tasten auch was sieht */
    g.lower_l text, g.lower_r text, 
    g.raise_l text, g.raise_r text, 
    g.adjust_style text { 
        fill: #ffffff !important; 
        font-weight: bold !important; 
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    /* Hintergrund des ganzen SVGs etwas dunkler f√ºr Kontrast */
    svg.keymap { background-color: #111827; border-radius: 10px; }
